<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/beige.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<style>
		pre {
			border: 0;
			margin: 0;
			padding: 0;
			box-shadow: none !important;
		}
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">

			<section>
				<h1>Testing for Communication</h1>
			</section>

			<section>
				<h2>I'm Chris</h2>
				<h3>@cm_stead</h3>
			</section>

			<section>
				<h2>Stuff I Do</h2>

				<ul>
					<li class="fragment">TDD</li>
					<li class="fragment">Domain Modeling</li>
					<li class="fragment">Library Development
						<ul>
							<li>JS Refactorings</li>
							<li>Signet</li>
							<li>DataMother</li>
							<li>QuickSpec</li>
						</ul>
					</li>
				</ul>
			</section>

			<section>
				<h2>Why Do We Say We Test?</h2>
				<ul class="fragment">
					<li>To verify correct behavior</li>
					<li>To capture information about bugs</li>
					<li>To meet code coverage</li>
					<li>We were told to</li>
				</ul>
			</section>

			<section>
				<h2>Tests Get No Respect</h2>
				<img src="./images/rodney-dangerfield.jpg">
			</section>

			<section>
				<h2>Let's Test Some Code!</h2>
				<pre>
					<code data-trim data-noescape>
						it('should return widgets', function () {
							const result = widgetFactory
								.buildWidgets("WidgeCo", {
									widgetMeta: {
										gearTeethCount: 91,
										handles: 3
									},
									presets: ['foo', 5, 12.3]
								}, 17);

							assert.equal(typeof result, object, 'Oh noes!');
						});
					</code>
				</pre>
			</section>

			<section>
				<h2>We Exercised The Code, But...</h2>

				<ul>
					<li>Description text should declare intent</li>
					<li>Named variables expose meaning better</li>
					<li>Complex objects can be extracted away</li>
					<li>Assertions should ensure full proper behavior</li>
				</ul>
			</section>

			<section>
				<img src="./images/so-close.jpg">
			</section>

			<section>
				<h2>Tests That Communicate</h2>

				<ul>
					<li class="fragment">Inform developers of intent</li>
					<li class="fragment">Exemplify API use</li>
					<li class="fragment">Deepen understanding of code contracts</li>
					<li class="fragment">Expose criteria for correct behavior</li>
				</ul>
			</section>

			<section>
				<h2>Writing Great Code Is Like Writing A Great Story</h2>
				<h3 class="fragment">It Never Happens In A Single Pass</h3>
			</section>

			<section>
				<h2>Where Do We Start?</h2>
				<p>Sometimes choosing the right place to start is the hardest thing you'll do all day</p>
			</section>

			<section>
				<h2>Here's What I'd Do</h2>

				<ol>
					<li class="fragment">Extract variables</li>
					<li class="fragment">Define and test with output type</li>
					<li class="fragment">Build factory for setup data</li>
					<li class="fragment">Update description</li>
					<li class="fragment">Introduce golden master test for completeness</li>
				</ol>
			</section>

			<section>
				<h2>Why Go That Way?</h2>

				<ol>
					<li class="fragment">Extracting variables is fast and easy</li>
					<li class="fragment">Types are declarative and easy to create and test with Signet</li>
					<li class="fragment">Factories are a little heavier, but quick with extracted data and DataMother</li>
					<li class="fragment">Test descriptions are easiest to write from declarative code</li>
					<li class="fragment">Golden master tests are accurate and complete, but longer to set up</li>
				</ol>
			</section>

			<section>
				<h2>Extract Variable</h2>
				<h3>Part of This Healthy Refactoring</h3>
				<h4>(P.S. You probably have a tool that will do this for you!)</h4>
			</section>

			<section>
				<pre>
					<code data-trim data-noescape>
						it('should return widgets', function () {
							const companyName = "WidgeCo";
							const widgetCount = 17;
							const widgetSpecs = {
								widgetMeta: {
									gearTeethCount: 91,
									handles: 3
								},
								presets: ['foo', 5, 12.3]
							}

							const widgets = widgetFactory
								.buildWidgets(companyName, widgetSpecs, widgetCount);

							assert.equal(typeof widgets, object, 'Oh noes!');
						});
					</code>
				</pre>
			</section>

			<section>
				<h2>Happy Variable Names, Everywhere!</h2>
				<img src="./images/wilt-snuggle-bear-full.jpg">
			</section>

			<section>
				<h2>Domain Modeling For The Fearless</h2>
				<h3>Signet Types Allow for Rich Verification</h3>
			</section>

			<section>
				<h2>Let's Model a Widget</h2>
				<pre>
					<code data-trim data-noescape>
						signet.defineDuckType('widget', {
							companyName: 'string',
							handles: 'array&lt;string&gt;',
							teethCount: 'int',
							startupDisplay: 'string',
							logMaxLength: 'int',
							humFrequencyTolerance: 'number'
						});
					</code>
				</pre>
			</section>

			<section>
				<h2>Then Our Test Becomes...</h2>
				<pre>
					<code data-trim data-noescape>
						it('should return widgets', function () {
							const isWidgetArray = signet.isTypeOf('array&lt;widget&gt;');

							const companyName = "WidgeCo";
							const widgetCount = 17;
							const widgetSpecs = {
								...
							}
							
							const widgets = widgetFactory
								.buildWidgets(companyName, widgetSpecs, widgetCount);
							
							assert(isWidgetArray(widgets), 'We didn\'t get a widget array!');
						});
					</code>
				</pre>
			</section>

		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			controls: false,
			transition: 'fade',
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>

</html>